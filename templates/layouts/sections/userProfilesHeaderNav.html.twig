{% if is_granted('IS_AUTHENTICATED_FULLY') %}
 {% set navClass = 'nav mx-xl-auto ms-auto flex-column flex-lg-row align-items-lg-center gap-lg-3' %}
 {% set navId = 'topMenu' %}

 {% if is_granted('ROLE_ADMIN') %}
    <ul class="nav mx-xl-auto ms-auto flex-column flex-lg-row align-items-lg-center gap-lg-3" id="">
        <li class="nav-item">
            <a href="/admin/dashboard" data-click-loading class="nav-link d-flex flex-column align-items-center text-center">
            <i class="fas fa-building fa-lg mb-3"></i>
            <span>Dashboard</span>
            </a>
        </li>
        <li class="nav-item">
            <a href="#" class="nav-link d-flex flex-column align-items-center text-center">
            <i class="fas fa-user-shield fa-lg mb-3"></i>
            <span>Administrators</span>
            </a>
        </li>
    </ul>

    {# ag: account drop down #}
    <ul class="nav mx-xl-auto ms-auto flex-column flex-lg-row align-items-lg-center gap-lg-3">
        <li class="nav-item dropdown ms-auto">
            <a class="nav-link d-flex flex-column align-items-center"
                href="#" id="userMenu" role="button"
                data-bs-toggle="dropdown" aria-expanded="false">

                <!-- Gear icon on top -->
                {# <i class="fas fa-gear fa-lg mb-3"></i> #}

                <!-- Text + caret inline -->
                <div class="d-flex align-items-center gap-1">
                    <span class="fw-semibold">Account</span>
                    <i class="fa-solid fa-caret-down"></i>
                </div>
            </a>

            <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="userMenu">
                <li class="px-3 py-2 small">
                    <div class="fw-semibold">{{ app.user.getUserProfile().getUserFullName() ?? 'Account' }}</div>
                    <div class="text-muted">{{ app.user.email }}</div>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                <a class="dropdown-item" href="#">
                    <i class="fas fa-user-pen me-2"></i>Edit Profile
                </a>
                </li>
                <li>
                <form method="post" action="{{ path('app_logout') }}">
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('logout') }}">
                    <button class="dropdown-item text-danger" type="submit">
                    <i class="fa-solid fa-right-from-bracket me-2"></i>Log Out
                    </button>
                </form>
                </li>
            </ul>
        </li>
        
    </ul>
 {# {% elseif is_granted('ROLE_FIRM_USER') %}
  <ul class="{{ navClass ?? null }}" id="{{ navId ?? null }}">
   <li class="nav-item mb-3 mb-lg-0">
    <a role="button" class="btn btn-warning d-flex flex-row flex-lg-column align-items-center justify-content-lg-center column-gap-3 row-gap-1" href="{{path('firm_file_upload') }}" data-dynamic-load="true" data-bs-toggle="modal" data-modal-title="Upload File(s)" data-bs-target="#modalActionRecord">
     <i class="fa-duotone fa-cloud-arrow-up"></i>
     <span>Send A File</span>
    </a>
   </li>
   <li class="nav-item">
    <a href="{{ path('firm_dashboard') }}" class="nav-link {{ app.request.pathInfo === path('firm_dashboard') ? 'active' : null }}">
     <i class="fa-duotone fa-home"></i>
     <span>Dashboard</span>
    </a>
   </li>
   <li class="nav-item">
    <a href="{{ path('firm_file_list') }}" class="nav-link {{ app.request.pathInfo === path('firm_file_list') ? 'active' : null }}">
     <i class="fa-duotone fa-key"></i>
     <span>File Management</span>
    </a>
   </li>
   <li class="nav-item">
    <a href="{{ path('firm_public_documents') }}" class="nav-link {{ app.request.pathInfo === path('firm_public_documents') ? 'active' : null }}">
     <i class="fa-duotone fa-file"></i>
     <span>Public Documents</span>
    </a>
   </li>
   <li class="nav-item">
        <a href="{{ path('firm_management') }}" class="nav-link {{ app.request.pathInfo === path('firm_management') ? 'active' : null }}">
        <i class="fa-duotone fa-bell"></i>
        <span>Account Management</span>
        </a>
   </li>
   {% if app.session.get('impersonator_token') is not null %}
    <li class="nav-item bg-pink">
            <a href="{{ path('firmuser_switch_back_admin') }}" class="nav-link">
            <i class="fa-duotone fa-sign-in"></i>
            <span>Exit Impersonation Mode</span>
            </a>
    </li>
   {% endif %}
  </ul>
 {% elseif is_granted('ROLE_CLIENT') %}
  <ul class="{{ navClass ?? null }}" id="{{ navId ?? null }}">
   <li class="nav-item mb-3 mb-lg-0">
    <a role="button" class="btn btn-warning d-flex flex-row flex-lg-column align-items-center justify-content-lg-center column-gap-3 row-gap-1" href="{{path('client_upload_file') }}" data-dynamic-load="true" data-bs-toggle="modal" data-modal-title="Upload File(s)" data-bs-target="#modalActionRecord">
     <i class="fa-duotone fa-cloud-arrow-up"></i>
     <span>Send A File</span>
    </a>
   </li>
   <li class="nav-item">
    <a href="{{ path('client_dashboard') }}" class="nav-link {{ app.request.pathInfo === path('client_dashboard') ? 'active' : null }}">
     <i class="fa-duotone fa-rectangle-list"></i>
     <span>Dashboard</span>
    </a>
   </li>
   <li class="nav-item">
    <a href="{{ path('client_file_list') }}" class="nav-link {{ app.request.pathInfo === path('client_file_list') ? 'active' : null }}">
     <i class="fa-duotone fa-files"></i>
     <span>File Management</span>
    </a>
   </li>
   <li class="nav-item">
    <a href="{{ path('client_public_documents') }}" class="nav-link {{ app.request.pathInfo === path('client_public_documents') ? 'active' : null }}">
     <i class="fa-duotone fa-globe"></i>
     <span>Public Documents</span>
    </a>
   </li>
   {% if app.session.get('impersonator_token') is not null %}
        <li class="nav-item bg-pink">
                <a href="{{ path('clientuser_switch_back_admin') }}" class="nav-link">
                <i class="fa-duotone fa-sign-in"></i>
                <span>Exit Impersonation Mode</span>
                </a>
        </li>
   {% endif %} #}
  </ul>
 {% endif %}
{% endif %}